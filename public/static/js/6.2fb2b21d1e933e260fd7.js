webpackJsonp([6],{Kimp:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("c2Ch"),i=o("0aFO"),r={data:function(){return{flag:!0,form:{n_title:"",n_status:0,questions:[{q_content:"题目内容",q_type:"单选",option:[{o_value:"选项一"}]},{q_content:"题目二",q_type:"单选",option:[{o_value:"选项一"}]}]}}},methods:{submitForm:function(t){var e=this;this.form.n_status=t,this.validate(this.form)&&Object(n.d)("naire",this.form).then(function(t){return 0===t.error_code?(Object(i.b)(t.msg),void e.$router.push("/home/list")):void Object(i.a)(t.msg)})},addQuestion:function(){this.form.questions.push({q_content:"",q_type:"单选",option:[{o_value:"选项一"}]})},delQuestion:function(t){if(1==this.form.questions.length)return Object(i.c)("已经是最后一题啦");this.form.questions.splice(t,1)},addMultiplyQuestion:function(){this.form.questions.push({q_content:"",q_type:"多选",option:[{o_value:"选项一"}]})},addOption:function(t){if(this.form.questions[t].option.length>=7)return Object(i.c)("一题最多添加7个选项噢");this.form.questions[t].option.push({o_value:"1"})},delOption:function(t,e){if(1==this.form.questions[t].option.length)return Object(i.c)("已经是最后一个啦");this.form.questions[t].option.splice(e,1)},validate:function(t){var e=!0;return t&&t.n_title?(this.form.n_title=this.form.n_title.trim(),t.n_title.length<5?(Object(i.a)("问卷标题不少于五个字"),!1):(t.questions.forEach(function(t,o){""!=t.q_content&&t.q_content||(Object(i.a)("请完整填写"),e=!1),t.option.forEach(function(t,o){""!=t.o_value&&t.o_value||(Object(i.a)("请完整填写"),e=!1)})}),e)):(Object(i.a)("请完整填写"),!1)}}},s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"问卷标题"}},[o("el-input",{attrs:{maxlength:"30","show-word-limit":""},model:{value:t.form.n_title,callback:function(e){t.$set(t.form,"n_title",e)},expression:"form.n_title"}})],1)],1),t._v(" "),o("div",{staticClass:"button-group"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addQuestion}},[t._v("单选题 + ")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addMultiplyQuestion}},[t._v("多选题 + ")])],1),t._v(" "),o("div",{staticClass:"question-wrap single-box"},t._l(t.form.questions,function(e,n){return o("div",[o("div",{staticClass:"question"},["单选"==e.q_type?o("el-form",{ref:"form",refInFor:!0,attrs:{model:t.form,"label-width":"80px",size:"medium"}},[o("el-form-item",{attrs:{label:"单选题 "+(n+1)}},[o("el-input",{attrs:{maxlength:"30","show-word-limit":""},model:{value:t.form.questions[n].q_content,callback:function(e){t.$set(t.form.questions[n],"q_content",e)},expression:"form.questions[qindex].q_content"}}),t._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(e){return t.addOption(n)}}}),t._v(" "),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.delQuestion(n)}}})],1),t._v(" "),t._l(t.form.questions[n].option,function(e,i){return[o("el-form-item",{attrs:{label:"选项"+(i+1)}},[o("el-input",{attrs:{maxlength:"15","show-word-limit":""},model:{value:t.form.questions[n].option[i].o_value,callback:function(e){t.$set(t.form.questions[n].option[i],"o_value",e)},expression:"form.questions[qindex].option[oindex].o_value"}}),t._v(" "),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.delOption(n,i)}}})],1)]})],2):t._e(),t._v(" "),"多选"==e.q_type?o("el-form",{ref:"form",refInFor:!0,attrs:{model:t.form,"label-width":"80px",size:"medium"}},[o("el-form-item",{attrs:{label:"多选题 "+(n+1)}},[o("el-input",{attrs:{maxlength:"30","show-word-limit":""},model:{value:t.form.questions[n].q_content,callback:function(e){t.$set(t.form.questions[n],"q_content",e)},expression:"form.questions[qindex].q_content"}}),t._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(e){return t.addOption(n)}}}),t._v(" "),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.delQuestion(n)}}})],1),t._v(" "),t._l(t.form.questions[n].option,function(e,i){return[o("el-form-item",{attrs:{label:"选项"+(i+1)}},[o("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:t.form.questions[n].option[i].o_value,callback:function(e){t.$set(t.form.questions[n].option[i],"o_value",e)},expression:"form.questions[qindex].option[oindex].o_value"}}),t._v(" "),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.delOption(n,i)}}})],1)]})],2):t._e()],1)])}),0),t._v(" "),o("div",{staticClass:"submit"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm(0)}}},[t._v("生成问卷")]),t._v(" "),o("el-button",{attrs:{type:"success"},on:{click:function(e){return t.submitForm(1)}}},[t._v("发布问卷")])],1)],1)},staticRenderFns:[]};var l=o("C7Lr")(r,s,!1,function(t){o("z6Kp")},"data-v-7af92356",null);e.default=l.exports},z6Kp:function(t,e){}});
//# sourceMappingURL=6.2fb2b21d1e933e260fd7.js.map