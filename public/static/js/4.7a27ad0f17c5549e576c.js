webpackJsonp([4],{DIVo:function(t,e){},PDza:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("lC5x"),a=n.n(r),o=n("J0Oq"),i=n.n(o),c=n("c2Ch"),s=n("0aFO"),u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t.over?t._e():n("div",[t._v("感谢参与调查  ^_^")]),t._v(" "),t.over?n("div",[t._v("该问卷已截止")]):t._e(),t._v(" "),n("div",[n("router-link",{attrs:{to:"/"}},[t._v("\n        去后台\n      ")])],1)])},staticRenderFns:[]};var l={components:{thanks:n("C7Lr")({props:["over"]},u,!1,function(t){n("gYix")},"data-v-e1b6f850",null).exports},data:function(){return{over:!1,filled:!1,n_id:"",dataArr:"",questions:"",options:[],selectData:[],answer:[],checkData:[],loading:!0,dData:[],single:[],multiple:[]}},methods:{getQuestion:function(t){var e=this;return i()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(c.c)("/naire/"+t).then(function(t){return console.log(t),t?0==t.n_status?(Object(s.a)("该问卷已截止"),void(e.over=!0)):(e.dataArr=t,e.questions=t.questions,void(e.loading=!1)):(Object(s.a)("没有找到此问卷"),void e.$router.push("/*"))});case 2:case"end":return n.stop()}},n,e)}))()},submit:function(){var t=this;return i()(a.a.mark(function e(){var n,r,o,i,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.selectData.filter(function(t){return t}),r=t.checkData.filter(function(t){return t}),o=[],console.log(t.checkData),t.checkData.forEach(function(t,e){o.push(t.q_id)}),i=!0,t.dData.forEach(function(t,e){-1===o.indexOf(t)&&(i=!1)}),console.log(i),!(n.length<t.single.length)&&i){e.next=10;break}return e.abrupt("return",Object(s.a)("请完整填写再提交"));case 10:return u=[],(u=n.concat(r)).forEach(function(e,n){e.o_id=e.id,e.n_id=t.n_id,delete e.id}),console.log(u),e.next=16,Object(c.d)("/naire/answer",u).then(function(e){0===!e.error_code&&Object(s.b)("内部错误"),Object(s.b)("提交成功"),t.filled=!0}).catch(function(t){Object(s.a)(t)});case 16:case"end":return e.stop()}},e,t)}))()},duoxuan:function(){var t=this;this.questions.forEach(function(e,n){"多选"==e.q_type&&(t.multiple.push(e),t.dData.push(e.id)),"单选"==e.q_type&&t.single.push(e)})},status:function(t){0==t&&(Object(s.a)("该问卷已截止"),this.$router.push("/home/list"))},removeEmpty:function(t){var e=[];return t.map(function(t,n){""!==t&&void 0!=t&&e.push(t)}),e}},computed:{singleNum:function(){return this.questions.forEach(function(t,e){"单选"==t.q_type&&1}),0},multipleNum:function(){return this.questions.forEach(function(t,e){"多选"==t.q_type&&1}),0}},created:function(){var t=this;return i()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.n_id=t.$route.params.id,e.next=3,t.getQuestion(t.$route.params.id);case 3:t.duoxuan(),console.log(t.single);case 5:case"end":return e.stop()}},e,t)}))()},mounted:function(){}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.filled||t.over?n("thanks",{attrs:{over:t.over}}):n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container"},[n("div",{staticClass:"title"},[t._v("\n    "+t._s(t.dataArr.n_title)+"\n  ")]),t._v(" "),n("div",{staticClass:"main"},t._l(t.questions,function(e,r){return n("div",{staticClass:"item"},[n("p",[1==e.q_isrequire?n("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e(),t._v(t._s(r+1)+"."+t._s(e.q_content)+"\n        "),n("span",{staticStyle:{color:"f6f6f6!important"}},[t._v("("+t._s(e.q_type)+")")])]),t._v(" "),"单选"==e.q_type?n("el-radio-group",{ref:"radioM",refInFor:!0,model:{value:t.selectData[r],callback:function(e){t.$set(t.selectData,r,e)},expression:"selectData[i]"}},t._l(e.option,function(e,r){return n("div",{staticClass:"opt"},[n("el-radio",{attrs:{label:e,size:"medium"}},[t._v(t._s(e.o_value))])],1)}),0):t._e(),t._v(" "),"多选"==e.q_type?n("el-checkbox-group",{ref:"checkbox"+e._id,refInFor:!0,model:{value:t.checkData,callback:function(e){t.checkData=e},expression:"checkData"}},t._l(e.option,function(e,r){return n("div",[n("el-checkbox",{attrs:{label:e}},[t._v(t._s(e.o_value))])],1)}),0):t._e()],1)}),0),t._v(" "),n("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){return t.submit()}}},[t._v("提交")])],1)},staticRenderFns:[]};var f=n("C7Lr")(l,d,!1,function(t){n("DIVo")},"data-v-858cf1a0",null);e.default=f.exports},gYix:function(t,e){}});
//# sourceMappingURL=4.7a27ad0f17c5549e576c.js.map